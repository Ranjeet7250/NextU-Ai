<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   NextU-Ai
  </title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 <!-- Font Awesome CDN -->
   <link rel="icon" type="image/png" href="img/NextU.png">
   <!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
            font-family: 'Inter', sans-serif;
            background-color: #0b0f19;
            color: #ffffff;
        }
        .bg-custom {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .btn-pink {
            background: linear-gradient(180deg, #ed0d8c, #d150d1);
            color: white;
        }
        .btn-pink:hover {
            background: linear-gradient(180deg, #f5289c, #d667d6);
        }
        .input-transparent {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        .input-transparent::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        nav a{
            text-decoration: none;  
        }
        main h1{
            width: 75%;
            opacity: 0.9;
        }
        main #p-tag{
            width: 50%;
            opacity: 0.5;
        }
        .chat-container {
            width: 100%;
            background:#ffffff1c;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .chat-box {
            overflow-y: auto;
            margin-bottom: 10px;
            padding: 30px;
            border-radius: 8px;

        }
        .user, .bot {
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }
        .user {
            background: linear-gradient(180deg, #ed0d8cc4, #d150d17d);

            color: white;
            text-align: right;
            margin-left: auto;
        }
        .profile{
            height: 30px;
            width: 30px;
            background: linear-gradient(180deg, #f5289c, #d667d6);
            border-radius: 50%;
            align-self: center;
            margin-left: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
        }
        .profile1 {
            width: 30px; 
            height: 30px;
            background-image: url("img/rob.png");
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat;
            border-radius: 50%; 
            margin-right: 10px;
        }
        .profile1 i{
            color: rgb(145, 21, 21);
        }
        .bot {
            /* background: linear-gradient(180deg, #ed0d8cc4, #d150d17d); */
            background: linear-gradient(180deg, #1b2f6c, #19213a);
            color: rgb(255, 255, 255);
            text-align: left;
        }
        .typing {
            font-style: italic;
            color: gray;
            display: flex;
            align-items: center;
        }
        .dot {
            width: 6px;
            height: 6px;
            margin: 0 2px;
            background-color: gray;
            border-radius: 50%;
            animation: blink 1.2s infinite ease-in-out;
        }
        .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes blink {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        .input-container {
            display: flex;
            gap: 10px;
        }
        input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            padding: 10px 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #0056b3;
        }
        #typing{
            width: 110px;
        }      
        #input-section{
            width: 80%; 
            background-color: rgba(255, 255, 255, 0.075);
            min-height: 52%;
            border: 1px solid rgba(255, 255, 255, 0.2); 
        } 
        @media (max-width: 992px){
            #input-section{
            width: 100%; 
            min-height: 60%;
           } 
           main h1{
            width: 100%;
            opacity: 0.9;
        }
        main #p-tag{
            width: 80%;
            opacity: 0.5;
        }
        }
        @media (max-width: 768px){
            #input-section{
            width: 100%; 
            } 
            main h1{
            width: 95%;
            opacity: 0.9;
        }
        main #p-tag{
            width: 85%;
            opacity: 0.5;
        }
        }
        @media (max-width: 577px){
            #input-section{
            width: 95%; 
            } 
            main h1{
            width: 80%;
            opacity: 0.9;
        }
        main #p-tag{
            width: 75%;
            opacity: 0.5;
        }
        .input-container{
            flex-direction: column;
        }
        }
  </style>
 </head>
 <body class="d-flex flex-column min-vh-100 " style=" background-image: url('img/BG\ P03.png'); background-size: cover; background-position: center; ">

  <header class="container-fluid py-3 bg-transparent" style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(50px); ">
   <div class="container d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
     <img alt="YGPT logo" class="me-2" height="40" style="border-radius: 5px;" src="img/roboLogo.png" width="40"/>
     <span class="fs-4 fw-bold">
      NextU-Ai
     </span>
    </div>
    <nav class="d-none d-md-flex gap-3">
     <a class="text-white" href="#">
      Home
     </a>
     <a class="text-white" href="#">
      Features
     </a>
     <a class="text-white" href="#">
      Journey
     </a>
     <a class="text-white" href="#">
     AI Guide
     </a>
     <a class="text-white" href="#">
      Privacy
     </a>
    </nav>
    <button class="btn btn-pink">
     Upgrade AI
    </button>
   </div>
  </header>

  <main class="container text-center my-4 d-flex justify-content-center align-items-center  flex-column" style="min-height: 82vh;">
   <h1 class="display-4 fw-bold mb-4">
    NextU-AI: Your Smart Guide to a Bright Future
   </h1>
   <p class="lead mb-4 fs-6" id="p-tag">
    Revolutionizing career guidance with AI-driven insights, helping you discover the best path by understanding your interests and aspirations
   </p>

   <div class=" p-4 rounded-4" id="input-section">
    
    <div class="d-flex align-items-center" id="remove">
     <img alt="Ask AI logo" class="me-2" height="40" src="img/NextU.png" width="40"/>
     <span class="fs-5 fw-semibold">
      Ask AI
     </span>
    </div>

    <div class=" bg-transparent p-2 pb-2 rounded-3" id="remove" >
     <p class="fs-5 fw-semibold mb-2" style="opacity: 0.8;">
      Ask 'Y' with your prompt.
     </p>
     <p class="small mb-4" style="opacity: 0.8;">
        AI-Powered Career Guidance for Choosing Your Best Path
     </p>
     <div class="d-flex flex-wrap gap-2 mb-4 d-flex justify-content-center align-items-center" >
      <button class="btn btn-secondary" style="background-color: #151d38;">
        <i class="fa fa-graduation-cap" style="font-size:16px;color:white"></i> Find Career
      </button>
      <button class="btn btn-secondary" style="background-color: #151d38;">
        <img src="img/answer (1).png" alt="" style="height: 20px; width: 23px;"> Best Option
      </button>
      <button class="btn btn-secondary" style="background-color: #151d38;">
        <img src="img/copy-writing.png" alt="" style="height: 20px; width: 23px;"> Make a plan
      </button>
      <button class="btn btn-secondary" style="background-color: #151d38;">
        <img src="img/compare.png" alt="" style="height: 20px; width: 23px;"> Compare Paths
      </button>
      <button class="btn btn-secondary" style="background-color: #151d38;">
        More
      </button>
     </div>
    </div>
    <div class="chat-container">
        <div class="chat-box" id="chat-box"></div>
        <div class="input-container">
            <input class="form-control input-transparent border-0 rounded-start" type="text" id="user-input" placeholder="Ask anythink" style="color: white; background-color: rgba(0, 0, 0, 0.479);" />
            <button class="btn btn-pink rounded-end" onclick="sendMessage()">Send</button>
        </div>
    </div>
   </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>
<script>
    function adjustChatHeight() {
        const chatContainer = document.querySelector(".chat-container");
        const chatBox = document.querySelector(".chat-box");
    
        if (chatContainer && chatBox) {
            chatContainer.style.height = "460px";
            chatBox.style.height = "370px";
            chatBox.style.padding = "0px";
        }
    
        // Chat container ke upar jo bhi extra div hain, unko remove karna
        let prevElement = chatContainer.previousElementSibling;
        while (prevElement) {
            let temp = prevElement.previousElementSibling;
            prevElement.remove();
            prevElement = temp;
        }
    }
    
    async function sendMessage() {
        adjustChatHeight(); // Height adjust aur extra divs remove karega
    
        const userInput = document.getElementById("user-input").value;
        const chatBox = document.getElementById("chat-box");
    
        if (userInput.trim() === "") return;
    
        // User Message Show Karna
        chatBox.innerHTML += 
        `
        <div style="display:flex;">
            <div class="user">${userInput}</div>
            <div class="profile">R</div>
        </div>
        `;
        document.getElementById("user-input").value = "";
    
        const typingIndicator = document.createElement("div");
        typingIndicator.style.display = "flex";
        typingIndicator.style.alignItems = "center";
    
        typingIndicator.innerHTML = `
        <div style="display: flex; align-items:center;">
            <div class="profile1"></div> 
                <div class="bot">
                    <div style="display: flex; align-items: center;">
                        <span id="typing">Bot is typing</span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                    </div>
                </div>    
            </div>
        `;
        chatBox.appendChild(typingIndicator);
    
        chatBox.scrollTop = chatBox.scrollHeight;
    
        // Backend Response Delay (2 सेकंड)
        setTimeout(async () => {
            chatBox.removeChild(typingIndicator);
            const payload = JSON.stringify({ userMessage: userInput });
            console.log("sending user data to ai: ",payload);
            const response = await fetch("http://localhost:5000/study-suggestion", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: payload
            });
            console.log("received response from ai:",response);
    
            const data = await response.json();
            console.log("formatted response in json: ",data);
            chatBox.innerHTML += `
            <div style="display: flex; align-items: center;">
                <div class="profile1"></div>
                <div class="bot">${data.reply}</div>
            </div>
            `;
    
            chatBox.scrollTop = chatBox.scrollHeight;
        }, 2000); 
    }
    
    // ✅ **Enter दबाने पर Message Send होगा**
    document.getElementById("user-input").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            sendMessage();
        }
    });
    async function handleUserInput() {
    let userInput = document.getElementById("user-input").value;
    if (userInput.trim() === "") return;

    let chatBox = document.getElementById("chat-box");

    // User ka message dikhana
    chatBox.innerHTML += `<div class="user">${userInput}</div>`;

    let botReply = await getStudySuggestion(userInput);

    // Bot ka response dikhana
    chatBox.innerHTML += `<div class="bot">${botReply}</div>`;
    
    document.getElementById("user-input").value = ""; // Input clear
}

    </script>
    
 </body>
</html>
